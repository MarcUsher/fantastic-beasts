{% extends 'base.html' %}

{% block title %}
{{ beast.name }}: Details
{% endblock %}

{% block content %}

<h1>Beast Details</h1>
<div class="row">
    <div class="col s12 m6">
        <div class="card">
            <div class="card-content">
                <span class="card-title">{{ beast.name }}</span>
                <p><b>Native to:</b> {{ beast.native }}</p>
                <p><b>Description:</b> {{ beast.description }}</p>
                <p><b>Size:</b> {{ beast.size }}</p>
                <p><b>Danger Level:</b>  {{ beast.danger }} 

                {% if beast.danger == 1 %}
                    <em>(Boring)</em>
                {% elif beast.danger == 2 %}
                    <em>(Harmless)</em>
                {% elif beast.danger == 3 %}
                    <em>(Competent wizard should cope)</em>
                {% elif beast.danger == 4 %}
                    <em>(Dangerous)</em>
                {% elif beast.danger == 5 %}
                    <em>(Known wizard killer)</em>
                {% else %}
                    <em>Unknown level</em>
                {% endif %}
                </p>
            </div>
            <div class="card-action">
                <a href="{% url 'beast_update' beast.id %}">Edit</a>
                <a href="{% url 'beast_delete' beast.id %}">Delete</a>
            </div>
        </div>
    </div>
    <div class="col s12 m6">
        <form action="{% url 'add_walk' beast.id %}" method="post">
            {% csrf_token %}
            {{ walk_form.as_p }}
            <input type="submit" class="btn red" value="Add Walk">
        </form>
        <br>
            {% if beast.exercised_today %}
            <div class="card-panel teal-text center-align">The {{beast.name}} has exercised today</div>
            {% else %}
            <div class="card-panel red-text center-align">The {{beast.name}} might need to go for a walk/fly/swim!</div>
            {% endif %}
        <br>
        <table class="striped">
          <thead>
            <tr><th>Date</th><th>Exercise</th></tr>
          </thead>
          <tbody>
            {% for walk in beast.walk_set.all %}
              <tr>
                <td>{{walk.date}}</td>
                <td>{{walk.get_distance_display}}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
</div>

<script>

    var dateEl = document.getElementById('id_date');
    M.Datepicker.init(dateEl, {
        format: 'yyyy-mm-dd',
        defaultDate: new Date(),
        setDefaultDate: true,
        autoClose: true
    });

    var selectEl = document.getElementById('id_distance');
    M.FormSelect.init(selectEl);

</script>

{% endblock %}